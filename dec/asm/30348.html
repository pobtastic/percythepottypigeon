<!DOCTYPE html>
<html>
<head>
<title>Percy the Potty Pigeon: Routine at 30348</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="30336.html">30336</a>
</td>
<td class="up">Up: <a href="../maps/all.html#30348">Map</a></td>
<td class="next">
Next: <a href="30867.html">30867</a>
</td>
</tr>
</table>
<div class="description">30348: Update Plane FlightPath</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="30336.html">Handler_Plane</a>.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">IX</td>
<td class="register-desc">Pointer to plane sprite data</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath</td>
<td class="address-2"><span id="30348"></span>30348</td>
<td class="instruction">LD IY,30639</td>
<td class="comment-1" rowspan="1"><span class="register">IY</span>=<a href="30348.html#30639">Plane_X_Position</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30352"></span>30352</td>
<td class="instruction">LD C,4</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30354"></span>30354</td>
<td class="instruction">LD B,56</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=56.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30356"></span>30356</td>
<td class="instruction">LD A,(24517)</td>
<td class="comment-1" rowspan="3">Jump to <a href="30348.html#30366">UpdatePlaneFlightPath_0</a> if *<a href="24517.html">CurrentRoom</a> is not equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30359"></span>30359</td>
<td class="instruction">CP 3</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30361"></span>30361</td>
<td class="instruction">JR NZ,<a href="30348.html#30366">UpdatePlaneFlightPath_0</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30363"></span>30363</td>
<td class="instruction">LD C,64</td>
<td class="comment-1" rowspan="1"><span class="register">C</span>=64.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30365"></span>30365</td>
<td class="instruction">LD B,C</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_0</td>
<td class="address-2"><span id="30366"></span>30366</td>
<td class="instruction">LD A,(24507)</td>
<td class="comment-1" rowspan="3">Jump to <a href="30348.html#30437">UpdatePlaneFlightPath_5</a> if *<a href="24507.html">RoomBufferFlag</a> is set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30369"></span>30369</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30370"></span>30370</td>
<td class="instruction">JP NZ,<a href="30348.html#30437">UpdatePlaneFlightPath_5</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30373"></span>30373</td>
<td class="instruction">LD A,(IY+2)</td>
<td class="comment-1" rowspan="3">Jump to <a href="30348.html#30430">UpdatePlaneFlightPath_4</a> if *<span class="register">IY</span>+2 is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30376"></span>30376</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30377"></span>30377</td>
<td class="instruction">JR Z,<a href="30348.html#30430">UpdatePlaneFlightPath_4</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30379"></span>30379</td>
<td class="instruction">BIT 7,(IY+0)</td>
<td class="comment-1" rowspan="2">Jump to <a href="29881.html">29881</a> if  bit 7 of *<span class="register">IY</span>+0 is set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30383"></span>30383</td>
<td class="instruction">JP NZ,<a href="29881.html">29881</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30386"></span>30386</td>
<td class="instruction">LD HL,30643</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30348.html#30643">30643</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30389"></span>30389</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30392"></span>30392</td>
<td class="instruction">BIT 7,(IY+1)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">IY</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30396"></span>30396</td>
<td class="instruction">JR NZ,<a href="30348.html#30408">UpdatePlaneFlightPath_1</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30408">UpdatePlaneFlightPath_1</a> if <span class="register">A</span> is not equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30398"></span>30398</td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30399"></span>30399</td>
<td class="instruction">CP 238</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30477">UpdatePlaneFlightPath_6</a> if <span class="register">A</span> is greater than or equal to 238.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30401"></span>30401</td>
<td class="instruction">JR NC,<a href="30348.html#30477">UpdatePlaneFlightPath_6</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30403"></span>30403</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30406"></span>30406</td>
<td class="instruction">JR <a href="30348.html#30415">UpdatePlaneFlightPath_2</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30415">UpdatePlaneFlightPath_2</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_1</td>
<td class="address-2"><span id="30408"></span>30408</td>
<td class="instruction">SUB (HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30409"></span>30409</td>
<td class="instruction">CP C</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30477">UpdatePlaneFlightPath_6</a> if <span class="register">A</span> is less than <span class="register">C</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30410"></span>30410</td>
<td class="instruction">JR C,<a href="30348.html#30477">UpdatePlaneFlightPath_6</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30412"></span>30412</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_2</td>
<td class="address-2"><span id="30415"></span>30415</td>
<td class="instruction">LD A,77</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=77.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30417"></span>30417</td>
<td class="instruction">BIT 7,(IY+1)</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30424">UpdatePlaneFlightPath_3</a> if bit 7 of *<span class="register">IY</span>+1 is set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30421"></span>30421</td>
<td class="instruction">JR NZ,<a href="30348.html#30424">UpdatePlaneFlightPath_3</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30423"></span>30423</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_3</td>
<td class="address-2"><span id="30424"></span>30424</td>
<td class="instruction">LD (IX+3),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30427"></span>30427</td>
<td class="instruction">JP <a href="29910.html">29910</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="29910.html">29910</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_4</td>
<td class="address-2"><span id="30430"></span>30430</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the contents of the Memory Refresh Register.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30432"></span>30432</td>
<td class="instruction">AND %01111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30434"></span>30434</td>
<td class="instruction">CP 127</td>
<td class="comment-1" rowspan="2">Return if <span class="register">A</span> is not equal to 127.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30436"></span>30436</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_5</td>
<td class="address-2"><span id="30437"></span>30437</td>
<td class="instruction">SET 7,(IY+2)</td>
<td class="comment-1" rowspan="1">Set bit 7 of *<span class="register">IY</span>+2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30441"></span>30441</td>
<td class="instruction">XOR A</td>
<td class="comment-1" rowspan="8">Write 0 to; <ul class="">
<li>*<a href="30348.html#30638">30638</a></li>
<li>*<span class="register">IY</span>+3</li>
<li>*<span class="register">IY</span>+1</li>
<li>*<span class="register">IX</span>+0</li>
<li>*<span class="register">IX</span>+2</li>
<li>*<span class="register">IX</span>+1</li>
<li>*<span class="register">IY</span>+0</li>
</ul></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30442"></span>30442</td>
<td class="instruction">LD (30638),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30445"></span>30445</td>
<td class="instruction">LD (IY+3),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30448"></span>30448</td>
<td class="instruction">LD (IY+1),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30451"></span>30451</td>
<td class="instruction">LD (IX+0),C</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30454"></span>30454</td>
<td class="instruction">LD (IX+2),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30457"></span>30457</td>
<td class="instruction">LD (IX+1),B</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30460"></span>30460</td>
<td class="instruction">LD (IY+0),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30463"></span>30463</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the contents of the Memory Refresh Register.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30465"></span>30465</td>
<td class="instruction">AND %00000001</td>
<td class="comment-1" rowspan="1">Keep only bit 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30467"></span>30467</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is equal to 127.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30468"></span>30468</td>
<td class="instruction">LD (IX+0),238</td>
<td class="comment-1" rowspan="1">Write 238 to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30472"></span>30472</td>
<td class="instruction">SET 7,(IY+1)</td>
<td class="comment-1" rowspan="1">Set bit 7 of *<span class="register">IY</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30476"></span>30476</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_6</td>
<td class="address-2"><span id="30477"></span>30477</td>
<td class="instruction">LD (IY+2),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">IY</span>+2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30481"></span>30481</td>
<td class="instruction">JR <a href="30348.html#30430">UpdatePlaneFlightPath_4</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30430">UpdatePlaneFlightPath_4</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30483"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="30336.html">Handler_Plane</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_7</td>
<td class="address-2"><span id="30483"></span>30483</td>
<td class="instruction">LD A,(30638)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="30348.html#30638">30638</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30486"></span>30486</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30541">UpdatePlaneFlightPath_8</a> if <span class="register">A</span> is non-zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30487"></span>30487</td>
<td class="instruction">JR NZ,<a href="30348.html#30541">UpdatePlaneFlightPath_8</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30489"></span>30489</td>
<td class="instruction">BIT 7,(IY+3)</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30575">UpdatePlaneFlightPath_11</a> if bit 7 of *<span class="register">IY</span>+3 not set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30493"></span>30493</td>
<td class="instruction">JR Z,<a href="30348.html#30575">UpdatePlaneFlightPath_11</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30495"></span>30495</td>
<td class="instruction">LD IX,56048</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="56048.html">56048</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30499"></span>30499</td>
<td class="instruction">LD (IX+3),20</td>
<td class="comment-1" rowspan="1">Write 20 to *<span class="register">IX</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30503"></span>30503</td>
<td class="instruction">LD A,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30506"></span>30506</td>
<td class="instruction">ADD A,3</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30508"></span>30508</td>
<td class="instruction">CP 160</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30570">UpdatePlaneFlightPath_10</a> if <span class="register">A</span> is greater than or equal to 160.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30510"></span>30510</td>
<td class="instruction">JR NC,<a href="30348.html#30570">UpdatePlaneFlightPath_10</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30512"></span>30512</td>
<td class="instruction">LD (IX+1),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30515"></span>30515</td>
<td class="instruction">PUSH IY</td>
<td class="comment-1" rowspan="1">Stash <span class="register">IY</span> on the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30517"></span>30517</td>
<td class="instruction">LD IX,56000</td>
<td class="comment-1" rowspan="1"><span class="register">IX</span>=<a href="56000.html">Percy_X_Position</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30521"></span>30521</td>
<td class="instruction">LD IY,56048</td>
<td class="comment-1" rowspan="1"><span class="register">IY</span>=<a href="56048.html">56048</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30525"></span>30525</td>
<td class="instruction">CALL <a href="27781.html">27781</a></td>
<td class="comment-1" rowspan="1">Call <a href="27781.html">27781</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30528"></span>30528</td>
<td class="instruction">POP IY</td>
<td class="comment-1" rowspan="1">Restore <span class="register">IY</span> from the stack.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30530"></span>30530</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is less than 160.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30531"></span>30531</td>
<td class="instruction">LD (IY+3),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">IY</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30535"></span>30535</td>
<td class="instruction">LD A,7</td>
<td class="comment-1" rowspan="2">Write 7 to *<a href="30348.html#30638">30638</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30537"></span>30537</td>
<td class="instruction">LD (30638),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30540"></span>30540</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_8</td>
<td class="address-2"><span id="30541"></span>30541</td>
<td class="instruction">DEC A</td>
<td class="comment-1" rowspan="1">Decrease <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30542"></span>30542</td>
<td class="instruction">LD (30638),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="30348.html#30638">30638</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30545"></span>30545</td>
<td class="instruction">OR A</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30564">UpdatePlaneFlightPath_9</a> if <span class="register">A</span> is zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30546"></span>30546</td>
<td class="instruction">JR Z,<a href="30348.html#30564">UpdatePlaneFlightPath_9</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30548"></span>30548</td>
<td class="instruction">RRA</td>
<td class="comment-1" rowspan="1">RRA.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30549"></span>30549</td>
<td class="instruction">ADD A,54</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=54.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30551"></span>30551</td>
<td class="instruction">LD (56003),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="56000.html#56003">Percy_Frame_ID</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30554"></span>30554</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the contents of the Memory Refresh Register.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30556"></span>30556</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30558"></span>30558</td>
<td class="instruction">LD (56002),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="56000.html#56002">Percy_Colour</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30561"></span>30561</td>
<td class="instruction">JP <a href="28253.html#28538">28538</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28253.html#28538">28538</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_9</td>
<td class="address-2"><span id="30564"></span>30564</td>
<td class="instruction">LD A,255</td>
<td class="comment-1" rowspan="2">Write 255 to *<a href="24487.html">FallingState</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30566"></span>30566</td>
<td class="instruction">LD (24487),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30569"></span>30569</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_10</td>
<td class="address-2"><span id="30570"></span>30570</td>
<td class="instruction">LD (IY+3),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">IY</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30574"></span>30574</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_11</td>
<td class="address-2"><span id="30575"></span>30575</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the contents of the Memory Refresh Register.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30577"></span>30577</td>
<td class="instruction">AND %00000001</td>
<td class="comment-1" rowspan="1">Keep only bits 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30579"></span>30579</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is not equal to <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30580"></span>30580</td>
<td class="instruction">LD A,(56001)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="56000.html#56001">Percy_Y_Position</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30583"></span>30583</td>
<td class="instruction">ADD A,10</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=10.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30585"></span>30585</td>
<td class="instruction">CP (IX+1)</td>
<td class="comment-1" rowspan="1">Compare <span class="register">A</span> with *<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30588"></span>30588</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is less than <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30589"></span>30589</td>
<td class="instruction">LD A,(56000)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<a href="56000.html">Percy_X_Position</a>.</td>
</tr>
<tr>
<td class="asm-label">Plane_Y_Position</td>
<td class="address-1"><span id="30592"></span>30592</td>
<td class="instruction">DEFB 230</td>
<td class="comment-1" rowspan="1">Plane Y position.</td>
</tr>
<tr>
<td class="asm-label">Plane_Colour</td>
<td class="address-1"><span id="30593"></span>30593</td>
<td class="instruction">DEFB 252</td>
<td class="comment-1" rowspan="1">Plane INK colour.</td>
</tr>
<tr>
<td class="asm-label">Plane_Frame_ID</td>
<td class="address-1"><span id="30594"></span>30594</td>
<td class="instruction">DEFB 71</td>
<td class="comment-1" rowspan="1">Plane frame ID.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30595"></span>30595</td>
<td class="instruction">DEFB 221</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30596"></span>30596</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30597"></span>30597</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30598"></span>30598</td>
<td class="instruction">AND %11111100</td>
<td class="comment-1" rowspan="1">Keep only bits 2-7.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30600"></span>30600</td>
<td class="instruction">CP B</td>
<td class="comment-1" rowspan="2">Return if <span class="register">A</span> is not equal to <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30601"></span>30601</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30602"></span>30602</td>
<td class="instruction">BIT 7,(IY+2)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">IY</span>+2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30606"></span>30606</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is equal to <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30607"></span>30607</td>
<td class="instruction">BIT 7,(IY+0)</td>
<td class="comment-1" rowspan="1">Test bit 7 of *<span class="register">IY</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30611"></span>30611</td>
<td class="instruction">RET NZ</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is not equal to <span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30612"></span>30612</td>
<td class="instruction">LD A,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30615"></span>30615</td>
<td class="instruction">ADD A,10</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=10.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30617"></span>30617</td>
<td class="instruction">LD (56049),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="56048.html#56049">56049</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30620"></span>30620</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30623"></span>30623</td>
<td class="instruction">LD (56048),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<a href="56048.html">56048</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30626"></span>30626</td>
<td class="instruction">LD A,255</td>
<td class="comment-1" rowspan="1">Write 255 to *<a href="56048.html#56050">56050</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30628"></span>30628</td>
<td class="instruction">LD (56050),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30631"></span>30631</td>
<td class="instruction">SET 7,(IY+3)</td>
<td class="comment-1" rowspan="1">Set bit 7 of *<span class="register">IY</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30635"></span>30635</td>
<td class="instruction">JP <a href="28253.html#28538">28538</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="28253.html#28538">28538</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30638"></span>30638</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30639"></span>
<div class="comments">
<div class="paragraph">
Plane States.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Plane_X_Position</td>
<td class="address-1"><span id="30639"></span>30639</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1">Plane X position.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30640"></span>30640</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30641"></span>30641</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30642"></span>30642</td>
<td class="instruction">NOP</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30643"></span>30643</td>
<td class="instruction">LD (BC),A</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30644"></span>30644</td>
<td class="instruction">LD IY,31492</td>
<td class="comment-1" rowspan="1"><span class="register">IY</span>=<a href="31427.html#31492">31492</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30648"></span>30648</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30649"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routines at <a href="29247.html">Handler_Room01</a>, <a href="29373.html">Handler_Room04</a>, <a href="29543.html">Handler_Room07</a>, <a href="29604.html">Handler_Room08</a>, <a href="29690.html">Handler_Room10</a> and <a href="29715.html">Handler_Room11</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_12</td>
<td class="address-2"><span id="30649"></span>30649</td>
<td class="instruction">LD A,(24507)</td>
<td class="comment-1" rowspan="3">Jump to <a href="30348.html#30799">UpdatePlaneFlightPath_21</a> if *<a href="24507.html">RoomBufferFlag</a> is non-zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30652"></span>30652</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30653"></span>30653</td>
<td class="instruction">JP NZ,<a href="30348.html#30799">UpdatePlaneFlightPath_21</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30656"></span>30656</td>
<td class="instruction">LD HL,30865</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30348.html#30865">30865</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30659"></span>30659</td>
<td class="instruction">LD A,(30866)</td>
<td class="comment-1" rowspan="3">Jump to <a href="30348.html#30805">UpdatePlaneFlightPath_22</a> if *<a href="30348.html#30866">30866</a> is non-zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30662"></span>30662</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30663"></span>30663</td>
<td class="instruction">JP NZ,<a href="30348.html#30805">UpdatePlaneFlightPath_22</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30666"></span>30666</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the contents of the Memory Refresh Register.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30668"></span>30668</td>
<td class="instruction">AND %01111111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-6.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30670"></span>30670</td>
<td class="instruction">CP 127</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30677">UpdatePlaneFlightPath_13</a> if <span class="register">A</span> is not equal to 127.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30672"></span>30672</td>
<td class="instruction">JR NZ,<a href="30348.html#30677">UpdatePlaneFlightPath_13</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30674"></span>30674</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30675"></span>30675</td>
<td class="instruction">CPL</td>
<td class="comment-1" rowspan="1">Invert the bits in <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30676"></span>30676</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_13</td>
<td class="address-2"><span id="30677"></span>30677</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Jump to <a href="30348.html#30695">UpdatePlaneFlightPath_14</a> if *<span class="register">HL</span> is non-zero.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30678"></span>30678</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30679"></span>30679</td>
<td class="instruction">JR NZ,<a href="30348.html#30695">UpdatePlaneFlightPath_14</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30681"></span>30681</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30684"></span>30684</td>
<td class="instruction">ADD A,1</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30686"></span>30686</td>
<td class="instruction">CP 238</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30791">UpdatePlaneFlightPath_19</a> if <span class="register">A</span> is greater than or equal to 238.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30688"></span>30688</td>
<td class="instruction">JR NC,<a href="30348.html#30791">UpdatePlaneFlightPath_19</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30690"></span>30690</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30693"></span>30693</td>
<td class="instruction">JR <a href="30348.html#30707">UpdatePlaneFlightPath_15</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30707">UpdatePlaneFlightPath_15</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_14</td>
<td class="address-2"><span id="30695"></span>30695</td>
<td class="instruction">LD A,(IX+0)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30698"></span>30698</td>
<td class="instruction">SUB 1</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30700"></span>30700</td>
<td class="instruction">CP 4</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30795">UpdatePlaneFlightPath_20</a> if <span class="register">A</span> is less than 4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30702"></span>30702</td>
<td class="instruction">JR C,<a href="30348.html#30795">UpdatePlaneFlightPath_20</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30704"></span>30704</td>
<td class="instruction">LD (IX+0),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_15</td>
<td class="address-2"><span id="30707"></span>30707</td>
<td class="instruction">CALL <a href="31024.html">31024</a></td>
<td class="comment-1" rowspan="1">Call <a href="31024.html">31024</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30710"></span>30710</td>
<td class="instruction">AND %00000011</td>
<td class="comment-1" rowspan="1">Keep only bits 0-1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30712"></span>30712</td>
<td class="instruction">CP 3</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30753">UpdatePlaneFlightPath_17</a> if <span class="register">A</span> is not equal to 3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30714"></span>30714</td>
<td class="instruction">JR NZ,<a href="30348.html#30753">UpdatePlaneFlightPath_17</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30716"></span>30716</td>
<td class="instruction">LD A,R</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=the contents of the Memory Refresh Register.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30718"></span>30718</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30719"></span>30719</td>
<td class="instruction">BIT 6,A</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30738">UpdatePlaneFlightPath_16</a> if bit 6 of <span class="register">A</span> is set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30721"></span>30721</td>
<td class="instruction">JR NZ,<a href="30348.html#30738">UpdatePlaneFlightPath_16</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30723"></span>30723</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30724"></span>30724</td>
<td class="instruction">AND %00000001</td>
<td class="comment-1" rowspan="1">Keep only bit 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30726"></span>30726</td>
<td class="instruction">ADD A,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30729"></span>30729</td>
<td class="instruction">CP 112</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30753">UpdatePlaneFlightPath_17</a> if <span class="register">A</span> is greater than or equal to 112.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30731"></span>30731</td>
<td class="instruction">JR NC,<a href="30348.html#30753">UpdatePlaneFlightPath_17</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30733"></span>30733</td>
<td class="instruction">LD (IX+1),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30736"></span>30736</td>
<td class="instruction">JR <a href="30348.html#30753">UpdatePlaneFlightPath_17</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30753">UpdatePlaneFlightPath_17</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_16</td>
<td class="address-2"><span id="30738"></span>30738</td>
<td class="instruction">LD A,B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30739"></span>30739</td>
<td class="instruction">AND %00000001</td>
<td class="comment-1" rowspan="1">Keep only bit 0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30741"></span>30741</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="1"><span class="register">B</span>=<span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30742"></span>30742</td>
<td class="instruction">LD A,(IX+1)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30745"></span>30745</td>
<td class="instruction">SUB B</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>-=<span class="register">B</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30746"></span>30746</td>
<td class="instruction">CP 24</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30753">UpdatePlaneFlightPath_17</a> if <span class="register">A</span> is less than 24.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30748"></span>30748</td>
<td class="instruction">JR C,<a href="30348.html#30753">UpdatePlaneFlightPath_17</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30750"></span>30750</td>
<td class="instruction">LD (IX+1),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_17</td>
<td class="address-2"><span id="30753"></span>30753</td>
<td class="instruction">LD (IX+3),73</td>
<td class="comment-1" rowspan="1">Write 73 to *<span class="register">IX</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30757"></span>30757</td>
<td class="instruction">LD IY,56000</td>
<td class="comment-1" rowspan="1"><span class="register">IY</span>=<a href="56000.html">Percy_X_Position</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30761"></span>30761</td>
<td class="instruction">CALL <a href="27731.html">CheckSpriteCollision</a></td>
<td class="comment-1" rowspan="1">Call <a href="27731.html">CheckSpriteCollision</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30764"></span>30764</td>
<td class="instruction">JR C,<a href="30348.html#30769">UpdatePlaneFlightPath_18</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30769">UpdatePlaneFlightPath_18</a> if <span class="register">A</span> is less than 24.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30766"></span>30766</td>
<td class="instruction">JP <a href="29910.html#29923">29923</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="29910.html#29923">29923</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_18</td>
<td class="address-2"><span id="30769"></span>30769</td>
<td class="instruction">LD A,(24489)</td>
<td class="comment-1" rowspan="3">Return if *<a href="24489.html">EggDropState</a> is unset.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30772"></span>30772</td>
<td class="instruction">OR A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30773"></span>30773</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30774"></span>30774</td>
<td class="instruction">LD IY,56032</td>
<td class="comment-1" rowspan="1"><span class="register">IY</span>=<a href="56032.html">Egg_States</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30778"></span>30778</td>
<td class="instruction">CALL <a href="27781.html">27781</a></td>
<td class="comment-1" rowspan="1">Call <a href="27781.html">27781</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30781"></span>30781</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if <span class="register">A</span> is less than <span class="register">A</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30782"></span>30782</td>
<td class="instruction">LD A,1</td>
<td class="comment-1" rowspan="2">Write 1 to *<a href="30348.html#30866">30866</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30784"></span>30784</td>
<td class="instruction">LD (30866),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30787"></span>30787</td>
<td class="instruction">JP <a href="29910.html#29951">29951</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="29910.html#29951">29951</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30790"></span>30790</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_19</td>
<td class="address-2"><span id="30791"></span>30791</td>
<td class="instruction">LD (HL),255</td>
<td class="comment-1" rowspan="1">Write 255 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30793"></span>30793</td>
<td class="instruction">JR <a href="30348.html#30753">UpdatePlaneFlightPath_17</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30753">UpdatePlaneFlightPath_17</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_20</td>
<td class="address-2"><span id="30795"></span>30795</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30797"></span>30797</td>
<td class="instruction">JR <a href="30348.html#30753">UpdatePlaneFlightPath_17</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="30348.html#30753">UpdatePlaneFlightPath_17</a>.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_21</td>
<td class="address-2"><span id="30799"></span>30799</td>
<td class="instruction">LD A,185</td>
<td class="comment-1" rowspan="2">Write 185 to *<a href="30348.html#30866">30866</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30801"></span>30801</td>
<td class="instruction">LD (30866),A</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30804"></span>30804</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_22</td>
<td class="address-2"><span id="30805"></span>30805</td>
<td class="instruction">LD HL,30866</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30348.html#30866">30866</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30808"></span>30808</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=*<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30809"></span>30809</td>
<td class="instruction">CP 4</td>
<td class="comment-1" rowspan="2">Jump to <a href="30348.html#30832">UpdatePlaneFlightPath_23</a> if <span class="register">A</span> is greater than or equal to 4.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30811"></span>30811</td>
<td class="instruction">JR NC,<a href="30348.html#30832">UpdatePlaneFlightPath_23</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30813"></span>30813</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30814"></span>30814</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30815"></span>30815</td>
<td class="instruction">ADD A,72</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>+=72.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30817"></span>30817</td>
<td class="instruction">LD (IX+3),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+3.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30820"></span>30820</td>
<td class="instruction">CALL <a href="31024.html">31024</a></td>
<td class="comment-1" rowspan="1">Call <a href="31024.html">31024</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30823"></span>30823</td>
<td class="instruction">AND %00000111</td>
<td class="comment-1" rowspan="1">Keep only bits 0-2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30825"></span>30825</td>
<td class="instruction">LD (IX+2),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30828"></span>30828</td>
<td class="instruction">CALL <a href="28253.html#28538">28538</a></td>
<td class="comment-1" rowspan="1">Call <a href="28253.html#28538">28538</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30831"></span>30831</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label">UpdatePlaneFlightPath_23</td>
<td class="address-2"><span id="30832"></span>30832</td>
<td class="instruction">INC A</td>
<td class="comment-1" rowspan="1">Increment <span class="register">A</span> by one.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30833"></span>30833</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Write <span class="register">A</span> to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30834"></span>30834</td>
<td class="instruction">CP 200</td>
<td class="comment-1" rowspan="2">Return if <span class="register">A</span> is not equal to 200.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30836"></span>30836</td>
<td class="instruction">RET NZ</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30837"></span>30837</td>
<td class="instruction">LD (IX+1),56</td>
<td class="comment-1" rowspan="1">Write 56 to *<span class="register">IX</span>+1.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30841"></span>30841</td>
<td class="instruction">LD (IX+2),7</td>
<td class="comment-1" rowspan="1">Write 7 to *<span class="register">IX</span>+2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30845"></span>30845</td>
<td class="instruction">LD HL,30866</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="30348.html#30866">30866</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30848"></span>30848</td>
<td class="instruction">LD (HL),0</td>
<td class="comment-1" rowspan="1">Write 0 to *<span class="register">HL</span>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30850"></span>30850</td>
<td class="instruction">LD (IX+0),238</td>
<td class="comment-1" rowspan="1">Write 238 to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30854"></span>30854</td>
<td class="instruction">CALL <a href="31024.html">31024</a></td>
<td class="comment-1" rowspan="1">Call <a href="31024.html">31024</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30857"></span>30857</td>
<td class="instruction">BIT 0,A</td>
<td class="comment-1" rowspan="2">Return if bit 0 of <span class="register">A</span> is not set.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30859"></span>30859</td>
<td class="instruction">RET Z</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30860"></span>30860</td>
<td class="instruction">LD (IX+0),4</td>
<td class="comment-1" rowspan="1">Write 4 to *<span class="register">IX</span>+0.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30864"></span>30864</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30865"></span>30865</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="30866"></span>30866</td>
<td class="instruction">DEFB 0</td>
<td class="comment-1" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="30336.html">30336</a>
</td>
<td class="up">Up: <a href="../maps/all.html#30348">Map</a></td>
<td class="next">
Next: <a href="30867.html">30867</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 2026 Urbanscan<br />&copy; 1984 Gremlin Graphics Software Ltd<br />&copy; 2026 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/percythepottypigeon/">Source code</a>.</div>
<div><a href="../../asm/768C.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>